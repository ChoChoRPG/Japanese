<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cho・Grammar</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="levelSelectionView">
        <div class="hero-section">
            <h1 class="hero-title">Grammar・Bunpou</h1>
            <p class="hero-subtitle">Pilih level JLPT Anda untuk mulai belajar</p>
        </div>
        
        <div class="level-grid">
            <div onclick="selectLevel('n5')" class="level-card card-n5">
                <div class="icon-circle">N5</div>
                <h3 class="level-title">Beginner</h3>
                <p class="level-desc">Dasar tata bahasa</p>
            </div>

            <div onclick="selectLevel('n4')" class="level-card card-n4">
                <div class="icon-circle">N4</div>
                <h3 class="level-title">Elementary</h3>
                <p class="level-desc">Konjugasi lanjutan</p>
            </div>

            <div onclick="selectLevel('n3')" class="level-card card-n3">
                <div class="icon-circle">N3</div>
                <h3 class="level-title">Intermediate</h3>
                <p class="level-desc">Bahasa sehari-hari</p>
            </div>
            
            <div onclick="selectLevel('n2')" class="level-card card-n2">
                <div class="icon-circle">N2</div>
                <h3 class="level-title">Pre-Advanced</h3>
                <p class="level-desc">Bisnis & Formal</p>
            </div>

            <div onclick="selectLevel('n1')" class="level-card card-n1">
                <div class="icon-circle">N1</div>
                <h3 class="level-title">Advanced</h3>
                <p class="level-desc">Akademik & Koran</p>
            </div>
        </div>
    </div>

    <div id="grammarListView">
        
        <header class="app-header">
            <div class="header-content">
                <div class="top-bar">
                    <button onclick="goBack()" class="back-btn">
                        <i data-lucide="arrow-left"></i>
                    </button>
                    <h2 class="header-title">
                        Grammar <span id="levelBadge" class="level-badge">N5</span>
                    </h2>
                </div>

                <div class="controls-bar">
                    <div class="filter-tabs">
                        <button onclick="setFilter('all')" class="filter-btn" data-filter="all">Semua</button>
                        <button onclick="setFilter('unlearned')" class="filter-btn" data-filter="unlearned">Belum</button>
                        <button onclick="setFilter('learned')" class="filter-btn" data-filter="learned">Sudah</button>
                        <button onclick="setFilter('liked')" class="filter-btn" data-filter="liked">Disukai</button>
                    </div>

                    <div class="right-controls">
                        <label class="toggle-label">
                            <input type="checkbox" id="randomToggle" onchange="toggleRandom()">
                            <span>Acak</span>
                        </label>
                        <div class="search-box">
                            <i data-lucide="search" class="search-icon"></i>
                            <input type="text" id="searchInput" placeholder="Cari..." class="search-input">
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="scroll-area">
            <div id="grammarGrid" class="grammar-grid">
                </div>

            <div id="emptyState" class="empty-state">
                <i data-lucide="filter" class="empty-icon"></i>
                <p>Tidak ada grammar yang cocok dengan filter ini.</p>
            </div>
        </main>
    </div>

    <div id="modalOverlay" class="modal-overlay">
        <div id="modalContent" class="modal-content">
            <div class="modal-header">
                <div>
                    <div class="modal-tags">
                        <span id="m-id" class="tag-id"></span>
                        <span id="m-level" class="tag-level"></span>
                    </div>
                    <h2 id="m-title" class="modal-title jp-text"></h2>
                    <p id="m-romaji" class="modal-subtitle"></p>
                </div>
                <button onclick="closeModal()" class="back-btn">
                    <i data-lucide="x"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div>
                    <span class="section-label">Arti</span>
                    <p id="m-meaning" class="meaning-text"></p>
                </div>

                <div class="connection-box">
                    <h3 class="connection-title">
                        <i data-lucide="link" style="width:16px;"></i> Rumus Sambungan
                    </h3>
                    <div id="m-connection"></div>
                </div>

                <div>
                    <h3 class="section-label" style="background:none; color:#64748b; padding-left:0;">Catatan</h3>
                    <ul id="m-notes" class="notes-list"></ul>
                </div>

                <div id="m-conjugation-wrapper" class="hidden" style="margin-bottom: 1.5rem;">
                    <h3 class="section-label" style="background:none; color:#64748b; padding-left:0;">Perubahan Bentuk</h3>
                    <table class="conj-table">
                        <tbody id="m-conjugations"></tbody>
                    </table>
                </div>

                <div>
                    <h3 class="section-label" style="background:none; color:#64748b; padding-left:0;">Contoh Kalimat</h3>
                    <div id="m-examples"></div>
                </div>
            </div>

            <div class="modal-footer">
                <label class="check-wrapper" style="display:flex; align-items:center; gap:0.5rem;">
                    <input type="checkbox" id="m-check" class="check-input" onchange="toggleFromModal('learned')">
                    <div class="custom-check" style="width:20px; height:20px;">
                        <i data-lucide="check" style="width:14px; height:14px;"></i>
                    </div>
                    <span style="font-weight:600; font-size:0.9rem; color:#475569;">Sudah Hafal</span>
                </label>
                
                <label class="star-label">
                    <input type="checkbox" id="m-star" class="star-input" onchange="toggleFromModal('liked')">
                    <i data-lucide="star" class="star-icon" style="width:24px; height:24px;"></i>
                </label>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>